import{r as e,o as a,c as l,w as s,a as t,F as r,b as u,d,e as c,t as n,f as i,i as o,g as f,h as _,S as v,I as p,j as g,v as k,n as h}from"./index-3a6de0df.js";import{o as y}from"./uni-fetch.7884c55d.js";import{g as m}from"./task.e13406f2.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const w=b({__name:"pickup",setup(p){const g=e([]),k=e({page:0,pageSize:5,status:1}),h=e(!1),b=e(!1),w=e(!1),x=async()=>{try{k.value.page++;const e=await m(k.value);console.log("results==>",e),1===k.value.page&&(g.value=[]),g.value=[...g.value,...e.data.items||[]],b.value=k.value.page==e.data.pages,w.value=g.value.length<=0}catch(e){console.log(e)}};y((()=>{x()}));const I=()=>{b.value||x()},$=async()=>{h.value=!0,k.value.page=0,await x(),h.value=!1};return(e,p)=>{const k=o,y=f,m=_,b=v;return a(),l(b,{"refresher-triggered":h.value,onRefresherrefresh:$,"refresher-enabled":"","refresher-background":"#f4f4f4;",onScrolltolower:I,class:"scroll-view-wrapper","scroll-y":"true"},{default:s((()=>[(a(!0),t(r,null,u(g.value,((e,t)=>(a(),l(y,{class:"card",key:t},{default:s((()=>[d(m,{"hover-class":"none",url:`/subpkg_task/detail/index?id=${e.id}`},{default:s((()=>[d(y,{class:"header"},{default:s((()=>[d(k,{class:"title"},{default:s((()=>[c("任务编号："+n(e.transportTaskId),1)])),_:2},1024),d(k,{class:"tips"},{default:s((()=>[c("已延迟")])),_:1})])),_:2},1024),d(y,{class:"body"},{default:s((()=>[d(y,{class:"time-line"},{default:s((()=>[d(y,{class:"line"},{default:s((()=>[c(n(e.startAddress),1)])),_:2},1024),d(y,{class:"line"},{default:s((()=>[c(n(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(y,{class:"footer"},{default:s((()=>[d(y,{class:"time"},{default:s((()=>[d(y,null,{default:s((()=>[c("提货时间")])),_:1}),d(y,null,{default:s((()=>[c(n(e.planDepartureTime),1)])),_:2},1024)])),_:2},1024),e.enablePickUp?(a(),l(m,{key:0,class:"action",url:`/subpkg_task/pickup/index?id=${e.id}`},{default:s((()=>[c("提货")])),_:2},1032,["url"])):(a(),l(m,{key:1,class:"action disabled"},{default:s((()=>[c("提货")])),_:1}))])),_:2},1024)])),_:2},1024)))),128)),w.value?(a(),l(y,{key:0,class:"task-blank"},{default:s((()=>[c("无待提货物")])),_:1})):i("",!0)])),_:1},8,["refresher-triggered"])}}},[["__scopeId","data-v-4dc53663"]]),x=b({__name:"delivery",setup(p){const g=e([]),k=e({page:0,pageSize:5,status:2}),h=e(!1),b=e(!1),w=e(!1),x=async()=>{try{k.value.page++;const e=await m(k.value);1===k.value.page&&(g.value=[]),g.value=[...g.value,...e.data.items||[]],b.value=k.value.page==e.data.pages,w.value=g.value.length<=0}catch(e){console.log(e)}};y((()=>{x()}));const I=()=>{b.value||x()},$=async()=>{h.value=!0,k.value.page=0,await x(),h.value=!1};return(e,p)=>{const k=o,y=f,m=_,b=v;return a(),l(b,{"refresher-triggered":h.value,onRefresherrefresh:$,"refresher-enabled":"","refresher-background":"#f4f4f4;",onScrolltolower:I,class:"scroll-view-wrapper","scroll-y":"true"},{default:s((()=>[(a(!0),t(r,null,u(g.value,((e,t)=>(a(),l(y,{class:"card",key:t},{default:s((()=>[d(m,{"hover-class":"none",url:`/subpkg_task/detail/index?id=${e.id}`},{default:s((()=>[d(y,{class:"header"},{default:s((()=>[d(k,{class:"title"},{default:s((()=>[c("任务编号："+n(e.transportTaskId),1)])),_:2},1024)])),_:2},1024),d(y,{class:"body"},{default:s((()=>[d(y,{class:"time-line"},{default:s((()=>[d(y,{class:"line"},{default:s((()=>[c(n(e.startAddress),1)])),_:2},1024),d(y,{class:"line"},{default:s((()=>[c(n(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(y,{class:"footer"},{default:s((()=>[d(y,{class:"time"},{default:s((()=>[d(y,null,{default:s((()=>[c("到货时间")])),_:1}),d(y,null,{default:s((()=>[c(n(e.planDepartureTime),1)])),_:2},1024)])),_:2},1024),2===e.status?(a(),l(m,{key:0,class:"action",url:`/subpkg_task/delivery/index?id=${e.id}`},{default:s((()=>[c("交付")])),_:2},1032,["url"])):i("",!0),4===e.status?(a(),l(m,{key:1,class:"action",url:`/subpkg_task/delivery/index?id=${e.id}`},{default:s((()=>[c("回车登记")])),_:2},1032,["url"])):i("",!0)])),_:2},1024)])),_:2},1024)))),128)),w.value?(a(),l(y,{key:0,class:"task-blank"},{default:s((()=>[c("无待提货物")])),_:1})):i("",!0)])),_:1},8,["refresher-triggered"])}}},[["__scopeId","data-v-8ff2dc95"]]),I=b({__name:"complete",setup(g){const k=e([]),h=e({page:0,pageSize:5,status:6}),b=e(!1),w=e(!1),x=e(!1),I=async()=>{try{h.value.page++;const e=await m(h.value);1===h.value.page&&(k.value=[]),k.value=[...k.value,...e.data.items||[]],w.value=h.value.page==e.data.pages,x.value=k.value.length<=0}catch(e){console.log(e)}};y((()=>{I()}));const $=()=>{w.value||I()},S=async()=>{b.value=!0,h.value.page=0,await I(),b.value=!1};return(e,g)=>{const h=o,y=p,m=f,w=_,I=v;return a(),l(m,{class:"page-container"},{default:s((()=>[d(m,{class:"search-bar"},{default:s((()=>[d(h,{class:"iconfont icon-search"}),d(y,{class:"input",type:"text",placeholder:"输入任务编号"})])),_:1}),d(I,{"refresher-triggered":b.value,onRefresherrefresh:S,"refresher-enabled":"","refresher-background":"#f4f4f4;",onScrolltolower:$,class:"scroll-view-wrapper","scroll-y":"true"},{default:s((()=>[(a(!0),t(r,null,u(k.value,((e,t)=>(a(),l(m,{class:"card",key:t},{default:s((()=>[d(w,{"hover-class":"none",url:`/subpkg_task/detail/index?id=${e.id}`},{default:s((()=>[d(m,{class:"header"},{default:s((()=>[d(h,{class:"title"},{default:s((()=>[c("任务编号："+n(e.transportTaskId),1)])),_:2},1024)])),_:2},1024),d(m,{class:"body"},{default:s((()=>[d(m,{class:"time-line"},{default:s((()=>[d(m,{class:"line"},{default:s((()=>[c(n(e.startAddress),1)])),_:2},1024),d(m,{class:"line"},{default:s((()=>[c(n(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(m,{class:"footer"},{default:s((()=>[d(m,{class:"time"},{default:s((()=>[d(m,null,{default:s((()=>[c("提货时间")])),_:1}),d(m,null,{default:s((()=>[c(n(e.planDepartureTime),1)])),_:2},1024)])),_:2},1024),2===e.status?(a(),l(w,{key:0,class:"action",url:`/subpkg_task/delivery/index?id=${e.id}`},{default:s((()=>[c("交付")])),_:2},1032,["url"])):i("",!0),4===e.status?(a(),l(w,{key:1,class:"action",url:`/subpkg_task/delivery/index?id=${e.id}`},{default:s((()=>[c("回车登记")])),_:2},1032,["url"])):i("",!0)])),_:2},1024)])),_:2},1024)))),128)),x.value?(a(),l(m,{key:0,class:"task-blank"},{default:s((()=>[c("无待提货物")])),_:1})):i("",!0)])),_:1},8,["refresher-triggered"])])),_:1})}}},[["__scopeId","data-v-c03739f0"]]),$=b({__name:"index",setup(o){const _=e(0),v=e([{title:"待提货",rendered:!0},{title:"在途",rendered:!1},{title:"已完成",rendered:!1}]);return(e,o)=>{const p=f;return a(),l(p,{class:"page-container"},{default:s((()=>[d(p,{class:"tab"},{default:s((()=>[(a(!0),t(r,null,u(v.value,((e,t)=>(a(),l(p,{onClick:e=>(e=>{v.value[e].rendered=!0,_.value=e})(t),class:"tab-item",key:t},{default:s((()=>[d(p,{class:h(["title",{active:_.value===t}])},{default:s((()=>[c(n(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1}),v.value[0].rendered?g((a(),l(p,{key:0,class:"message-list"},{default:s((()=>[d(w)])),_:1},512)),[[k,0===_.value]]):i("",!0),v.value[1].rendered?g((a(),l(p,{key:1,class:"message-list"},{default:s((()=>[d(x)])),_:1},512)),[[k,1===_.value]]):i("",!0),v.value[2].rendered?g((a(),l(p,{key:2,class:"message-list"},{default:s((()=>[d(I)])),_:1},512)),[[k,2===_.value]]):i("",!0)])),_:1})}}},[["__scopeId","data-v-5ac24701"]]);export{$ as default};
