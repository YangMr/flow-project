"use strict";const e=require("../../../common/vendor.js"),r=require("../../../api/user.js"),o=require("../../../stores/user.js");if(require("../../../api/uni-fetch.js"),!Array){(e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const a={__name:"account",setup(a){const s=o.useUserStore(),u=e.ref(),n=e.ref(""),t=e.ref(""),c=e.ref({account:"",password:""});e.onLoad((e=>{n.value=e.redirectUrl,t.value=e.routeType}));const i=e.ref({account:{rules:[{required:!0,errorMessage:"请输入登录账号"},{pattern:/^[a-zA-Z0-9]{6,8}$/,errorMessage:"登录账号格式不正确"}]},password:{rules:[{required:!0,errorMessage:"请输入登录密码"},{pattern:/^\d{6}$/,errorMessage:"登录密码格式不正确"}]}}),l=async()=>{try{const o=await u.value.validate(),a=await r.login(o);a.data&&(s.token=a.data),"switchTab"===t.value?e.index.switchTab({url:n.value}):e.index.redirectTo({url:n.value})}catch(o){console.log("e",o)}};return(r,o)=>({a:c.value.account,b:e.o((e=>c.value.account=e.detail.value)),c:e.p({name:"account"}),d:c.value.password,e:e.o((e=>c.value.password=e.detail.value)),f:e.p({name:"password"}),g:e.sr(u,"1c0cdd7c-0",{k:"accountForm"}),h:e.p({rules:i.value,modelValue:c.value}),i:e.o(l)})}};wx.createComponent(a);
