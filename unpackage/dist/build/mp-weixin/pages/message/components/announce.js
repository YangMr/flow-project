"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/message.js");if(require("../../../api/uni-fetch.js"),require("../../../stores/user.js"),!Array){(e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list"))()}Math||((()=>"../../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../../uni_modules/uni-list/components/uni-list/uni-list.js"))();const t={__name:"announce",setup(t){const l=e.ref(!1),s=e.ref(!1),u=e.ref({}),i=e.ref([]),n=e.ref(0),o=e.ref(5),r=e.ref(!1),v=e.ref("200"),c=async()=>{try{n.value+=1;const e=await a.getMessage(v.value,n.value,o.value);1===n.value&&(i.value=[]),u.value=e.data,i.value=[...i.value,...e.data.items||[]],s.value=n.value==u.value.pages,l.value=0===i.value.length}catch(e){console.log(e)}};e.onLoad((()=>{c()}));const d=()=>{s.value||c()},m=async()=>{r.value=!0,n.value=0,await c(),r.value=!1},g=async()=>{try{await a.getReadAll(v.value);n.value=0,c()}catch(e){console.log(e)}};return(a,t)=>e.e({a:i.value.length>0},i.value.length>0?{b:e.o(g),c:e.f(i.value,((a,t,l)=>e.e({a:0===a.isRead},(a.isRead,{}),{b:a.id,c:"6785b1c2-1-"+l+",6785b1c2-0",d:e.p({title:a.title,"right-text":a.created,ellipsis:"1",to:`/subpkg_message/content/index?id=${a.id}`})})))}:{},{d:l.value},(l.value,{}),{e:r.value,f:e.o(m),g:e.o(d)})}};wx.createComponent(t);
