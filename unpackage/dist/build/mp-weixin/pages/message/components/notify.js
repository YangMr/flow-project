"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/message.js");if(require("../../../api/uni-fetch.js"),require("../../../stores/user.js"),!Array){e.resolveComponent("uni-card")()}Math;const l={__name:"notify",setup(l){const t=e.ref(!1),u=e.ref("201"),o=e.ref(0),s=e.ref(5),r=e.ref([]),n=e.ref(!1),c=e.ref(!1),v=async()=>{console.log("123");try{o.value+=1;const e=await a.getMessage(u.value,o.value,s.value);1===o.value&&(r.value=[]),r.value=[...r.value,...e.data.items||[]],console.log("result",e),n.value=o.value==e.data.pages,t.value=0===r.value.length}catch(e){console.log(e)}};e.onLoad((()=>{v()}));const i=()=>{n.value||v()},f=async()=>{c.value=!0,o.value=0,await v(),c.value=!1},d=async()=>{try{await a.getReadAll(u.value);o.value=0,v()}catch(e){console.log(e)}};return(a,l)=>e.e({a:e.o(d),b:e.f(r.value,((a,l,t)=>({a:e.t(a.content),b:e.t(a.created),c:e.t(a.title),d:0===a.isRead?1:"",e:l,f:"8137be3c-0-"+t}))),c:e.p({"is-shadow":!1}),d:n.value},(n.value,{}),{e:t.value},(t.value,{}),{f:c.value,g:e.o(f),h:e.o(i)})}};wx.createComponent(l);
