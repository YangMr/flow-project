"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/task.js");require("../../../api/uni-fetch.js"),require("../../../stores/user.js");const s={__name:"delivery",setup(s){const t=e.ref([]),u=e.ref({page:0,pageSize:5,status:2}),r=e.ref(!1),i=e.ref(!1),l=e.ref(!1),d=async()=>{try{u.value.page++;const e=await a.getTasks(u.value);1===u.value.page&&(t.value=[]),t.value=[...t.value,...e.data.items||[]],i.value=u.value.page==e.data.pages,l.value=t.value.length<=0}catch(e){console.log(e)}};e.onLoad((()=>{d()}));const n=()=>{i.value||d()},v=async()=>{r.value=!0,u.value.page=0,await d(),r.value=!1};return(a,s)=>e.e({a:e.f(t.value,((a,s,t)=>e.e({a:e.t(a.transportTaskId),b:e.t(a.startAddress),c:e.t(a.endAddress),d:`/subpkg_task/detail/index?id=${a.id}`,e:e.t(a.planDepartureTime),f:2===a.status},2===a.status?{g:`/subpkg_task/delivery/index?id=${a.id}`}:{},{h:4===a.status},4===a.status?{i:`/subpkg_task/delivery/index?id=${a.id}`}:{},{j:s}))),b:l.value},(l.value,{}),{c:r.value,d:e.o(v),e:e.o(n)})}};wx.createComponent(s);
