"use strict";const e=require("../../common/vendor.js"),t=require("../../api/task.js");if(require("../../api/uni-fetch.js"),require("../../stores/user.js"),!Array){(e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list"))()}Math||((()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js"))();const u={__name:"index",setup(u){const n=e.ref(""),o=e.ref(""),l=e.ref(""),r=e.computed((()=>{const e=new Date(o.value).getTime();console.log("start",e);const t=new Date(l.value).getTime();return t-e>0&&t-e<72e5})),a=e.ref(""),i=e.computed((()=>a.value.length)),s=e.computed((()=>i.value<=50&&i.value>0));e.onLoad((e=>{n.value=e.id,o.value=e.planDepartureTime}));const c=e.computed((()=>s.value&&r.value)),d=e=>{const[t]=o.value.split(" ");l.value=`${t} ${e.detail.value}`},v=async()=>{try{const u={id:n.value,delayTime:l.value,delayReason:a.value};await t.delay(u);e.index.reLaunch({url:"/pages/task/index"})}catch(u){console.log(u)}};return(t,u)=>e.e({a:e.p({border:!1,title:"原定时间",showArrow:!0,"right-text":o.value}),b:!l.value},l.value?{c:e.t(l.value),d:e.unref(r)?"":1}:{},{e:e.o(d),f:e.p({border:!1,title:"延迟时间",showArrow:!0}),g:a.value,h:e.o((e=>a.value=e.detail.value)),i:e.t(e.unref(i)),j:e.unref(i)>50?1:"",k:e.p({border:!1,direction:"column"}),l:e.o(v),m:!e.unref(c),n:e.p({border:!1}),o:e.p({border:!1})})}};wx.createPage(u);
