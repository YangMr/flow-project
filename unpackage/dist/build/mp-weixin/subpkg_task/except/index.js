"use strict";const e=require("../../common/vendor.js"),o=require("../../api/task.js");if(require("../../api/uni-fetch.js"),require("../../stores/user.js"),!Array){(e.resolveComponent("uni-datetime-picker")+e.resolveComponent("uni-list-item")+e.resolveComponent("uni-file-picker")+e.resolveComponent("uni-list")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker.js")+(()=>"../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const i={__name:"index",setup(i){const t=e.ref("");e.onLoad((e=>{t.value=e.transportTaskId}));const n=e.ref(""),u=e.computed((()=>n.value||"请选择")),l=e.ref(""),a=async()=>{try{const{address:o}=await e.index.chooseLocation({});console.log("address",o),l.value=o}catch(o){console.log(o)}},s=e.ref(""),p=e.ref("popup"),r=["发动机启动困难","不着车，漏油","照明失灵","排烟异常、温度异常","其他问题"],c=()=>{p.value.open()},m=[],d=e=>{m.push(e.detail.value[0]),console.log("tempException",m)},v=()=>{p.value.close(),s.value=m.join("|")},f=e.ref(""),k=e.ref([]),x=e.computed((()=>k.value.map((e=>({url:e.url}))))),g=async()=>{try{const i={transportTaskId:t.value,exceptionTime:u.value,exceptionPlace:l.value,exceptionType:s.value,exceptionImagesList:x.value};await o.reportException(i);e.index.reLaunch({url:"/pages/task/index"})}catch(i){console.log(i)}};return(o,i)=>({a:e.t(e.unref(u)),b:e.o((e=>n.value=e)),c:e.p({modelValue:n.value}),d:e.p({title:"异常时间","right-text":"请选择","show-arrow":!0}),e:e.o(a),f:e.p({clickable:!0,title:"上报位置","right-text":l.value||"请选择","show-arrow":!0}),g:e.o(c),h:e.p({clickable:!0,title:"异常类型","right-text":s.value||"请选择","show-arrow":!0}),i:f.value,j:e.o((e=>f.value=e.detail.value)),k:e.p({title:"异常描述"}),l:e.o((e=>k.value=e)),m:e.p({"file-extname":"jpg,webp,gif,png",limit:"3",modelValue:k.value}),n:e.p({title:"上传图片(最多3张)",direction:"column"}),o:e.o(g),p:e.f(r,((o,i,t)=>({a:o,b:e.o(d,i),c:i,d:"2b11dfa0-10-"+t+",2b11dfa0-9",e:e.p({title:o})}))),q:e.o(v),r:e.sr(p,"2b11dfa0-8",{k:"popup"}),s:e.p({type:"bottom"})})}};wx.createPage(i);
